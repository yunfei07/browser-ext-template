{"version":3,"file":"popup.js","sources":["../../src/popup/main.ts"],"sourcesContent":["const pingButton = document.getElementById(\"ping\");\nconst highlightButton = document.getElementById(\"highlight\");\nconst statusEl = document.getElementById(\"status\");\n\nconst setStatus = (text: string) => {\n  if (statusEl) {\n    statusEl.textContent = text;\n  }\n};\n\nconst getActiveTabId = async () => {\n  const [tab] = await chrome.tabs.query({ active: true, currentWindow: true });\n  if (!tab?.id) {\n    throw new Error(\"未找到活动标签页\");\n  }\n  return tab.id;\n};\n\nconst sendMessageToContent = async (payload: unknown) => {\n  const tabId = await getActiveTabId();\n  return chrome.tabs.sendMessage(tabId, payload);\n};\n\npingButton?.addEventListener(\"click\", async () => {\n  setStatus(\"正在发送 Ping...\");\n  try {\n    const response = await sendMessageToContent({ type: \"PING_FROM_POPUP\" });\n    setStatus(response?.message ?? \"Ping 已发送\");\n  } catch (error) {\n    setStatus(`发送失败：${(error as Error).message}`);\n  }\n});\n\nhighlightButton?.addEventListener(\"click\", async () => {\n  setStatus(\"尝试高亮当前选中内容...\");\n  try {\n    await sendMessageToContent({ type: \"HIGHLIGHT_SELECTION\" });\n    setStatus(\"高亮已应用（若存在选中内容）\");\n  } catch (error) {\n    setStatus(`操作失败：${(error as Error).message}`);\n  }\n});\n"],"names":["pingButton","highlightButton","statusEl","setStatus","text","getActiveTabId","tab","sendMessageToContent","payload","tabId","response","error"],"mappings":"ssBAAA,MAAMA,EAAa,SAAS,eAAe,MAAM,EAC3CC,EAAkB,SAAS,eAAe,WAAW,EACrDC,EAAW,SAAS,eAAe,QAAQ,EAE3CC,EAAaC,GAAiB,CAC9BF,IACFA,EAAS,YAAcE,EAE3B,EAEMC,EAAiB,SAAY,CACjC,KAAM,CAACC,CAAG,EAAI,MAAM,OAAO,KAAK,MAAM,CAAE,OAAQ,GAAM,cAAe,EAAA,CAAM,EAC3E,GAAI,EAACA,GAAA,MAAAA,EAAK,IACR,MAAM,IAAI,MAAM,UAAU,EAE5B,OAAOA,EAAI,EACb,EAEMC,EAAuB,MAAOC,GAAqB,CACvD,MAAMC,EAAQ,MAAMJ,EAAA,EACpB,OAAO,OAAO,KAAK,YAAYI,EAAOD,CAAO,CAC/C,EAEAR,GAAA,MAAAA,EAAY,iBAAiB,QAAS,SAAY,CAChDG,EAAU,cAAc,EACxB,GAAI,CACF,MAAMO,EAAW,MAAMH,EAAqB,CAAE,KAAM,kBAAmB,EACvEJ,GAAUO,GAAA,YAAAA,EAAU,UAAW,UAAU,CAC3C,OAASC,EAAO,CACdR,EAAU,QAASQ,EAAgB,OAAO,EAAE,CAC9C,CACF,GAEAV,GAAA,MAAAA,EAAiB,iBAAiB,QAAS,SAAY,CACrDE,EAAU,eAAe,EACzB,GAAI,CACF,MAAMI,EAAqB,CAAE,KAAM,sBAAuB,EAC1DJ,EAAU,gBAAgB,CAC5B,OAASQ,EAAO,CACdR,EAAU,QAASQ,EAAgB,OAAO,EAAE,CAC9C,CACF"}